<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>Digital Archive of Online Art Exhibitions</title>
	<link href="./css/style.css" rel="stylesheet" />
</head>
<!-- Ant Hēa is an anagram for Athēna by athena yating wang -->

<body>

	<div class="archive-wrap">
		<div class="flex-normal align-items-center selector">
			<h1><i>Mapping the Infinite Land</i>: Archive of Online Exhibitions</h1>
			<div class="flex-normal search">
				<input  type="text" id="keywords" class="search-input" placeholder="type/name/person"/>
				<button class="search-btn" id="search-btn">search</button>
			</div>
			<button id="about">About</button>
		</div>
		<table class="table" id="table" cellpadding="0" cellspacing="0">
		</table>
		<div class="flex-normal bottom">
			<div class="left">
				<button id="top">∧</button>
			</div>
<!-- 			<div class="flex-normal align-items-center right">
				<button id="download">download</button>
			</div> -->
		</div>
	</div>
	<div class="flex-normal mask-wrap" id="mask">
		<div class="mask-content flex-column">
			<div class="mask-context">
				<div class="text">
					<h1>Archive of Online Exhibitions 2020-2022</h1>

					Hi anonymous visitor &#x1f41c;! Welcome to the land of online art exhibitions.<br>
					Now, if you are physically confined in one place,
					don't forget your digital body can be connected to the Internet, where infinite possibilities
					are
					waiting. <br>
					Feel free to roam around and explore some art!

				</div>
			</div>
			<button id="close">Got it!</button>
		</div>
	</div>
	<script src="./js/data.js"></script>
	<script>
		var table = document.getElementById('table')
		var topBtn = document.getElementById('top')
		var leftBtn = document.getElementById('left')
		var rightBtn = document.getElementById('right')
		var downloadBtn = document.getElementById('download')
		var close = document.getElementById('close')
		var about = document.getElementById('about')
		var mask = document.getElementById('mask')
		var keywords = document.getElementById('keywords')
		var searchBtn = document.getElementById('search-btn')
		var newList = JSON.parse(JSON.stringify(list))

		
		getRender()
		
		function getRender(){
			table.innerHTML = ''
			for (let i = 0; i < list.length; i++) {
				var tr = document.createElement('tr');
				tr.classList.add('tr')
				tr.innerHTML = `
							<td class="oder">${i + 1}</td>
							<td class="year">${list[i].year}</td>
							<td class="type">${list[i].type}</td>
							<td class="name">${list[i].name}</td>
							<td class="person">${list[i].person}</td>
					`
			
				var intrTr = document.createElement('tr');
				intrTr.classList.add('intro')
				intrTr.classList.add('hide')
			
				var Acloumn = '';
				var Bcloumn = '';
				var Ccloumn = '';
				var Dcloumn = '';
				var Ecloumn = '';
				var Fcloumn = '';
				var Gcloumn = '';
				var Hcloumn = '';
				var Icloumn = '';
				var Jcloumn = '';
				var Kcloumn = '';
				var Lcloumn = '';
				var Mcloumn = '';
				var Ncloumn = '';
				var Ocloumn = '';
				var Pcloumn = '';
				var Qcloumn = '';
				if (list[i].info.A) {
					Acloumn = `
							<div>${list[i].info.A}</div>
						`
				}
				if (list[i].info.B) {
					Bcloumn = `
							<div>${list[i].info.B}</div>
						`
				}
			
				if (list[i].info.C) {
					Ccloumn = `
							<div>${list[i].info.C}</div>
						`
				}
			
				if (list[i].info.D) {
					Dcloumn = `
							<div>${list[i].info.D}</div>
						`
				}
				if (list[i].info.E) {
					Ecloumn = `
							<div>${list[i].info.E}</div>
						`
				}
				if (list[i].info.F) {
					Fcloumn = `
							<div>${list[i].info.F}</div>
						`
				}
				if (list[i].info.G) {
					Gcloumn = `
							<div>${list[i].info.G}</div>
						`
				}
				if (list[i].info.H) {
					Hcloumn = `
							<div>${list[i].info.H}</div>
						`
				}
				if (list[i].info.I) {
					Icloumn = `
							<div>${list[i].info.I}</div>
						`
				}
				if (list[i].info.J) {
					Jcloumn = `
							<div>${list[i].info.J}</div>
						`
				}
				if (list[i].info.K) {
					if (list[i].info.K.indexOf('http') != -1) {
						Kcloumn = `
								<div><a href="${list[i].info.K}">${list[i].info.K}</a></div>
							`
					} else {
						Kcloumn = `
								<div>${list[i].info.K}</div>
							`
					}
				}
				if (list[i].info.L) {
					if (list[i].info.L.indexOf('http') != -1) {
						Lcloumn = `
								<div><a href="${list[i].info.L}">${list[i].info.L}</a></div>
							`
					} else {
						Lcloumn = `
								<div>${list[i].info.L}</div>
							`
					}
			
				}
				if (list[i].info.M) {
					if (list[i].info.M.indexOf('http') != -1) {
						Mcloumn = `
								<div><a href="${list[i].info.M}">${list[i].info.M}</a></div>
							`
					} else {
						Mcloumn = `
								<div>${list[i].info.M}</div>
							`
					}
				}
				if (list[i].info.N) {
					Ncloumn = `
							<div>${list[i].info.N}</div>
						`
				}
				if (list[i].info.O) {
					Ocloumn = `
							<div>${list[i].info.O}</div>
						`
				}
				if (list[i].info.P) {
					Pcloumn = `
							<div>${list[i].info.P}</div>
						`
				}
			
				if (list[i].info.Q.length > 0) {
					for (var index = 0; index < list[i].info.Q.length; index++) {
						Qcloumn += '<div><img src="' + list[i].info.Q[index] + '" style="width:500px"/></div>'
					}
				}
			
				intrTr.innerHTML = `
						<td class="oder"></td>
						<td class="year"></td>
						<td class="type"></td>
						<td class="name">
							${Acloumn}
							${Bcloumn}
							${Ccloumn}
							${Dcloumn}
							${Ecloumn}
							${Fcloumn}
							${Gcloumn}
							${Hcloumn}
							${Icloumn}
							${Jcloumn}
							${Kcloumn}
							${Lcloumn}
							${Mcloumn}
							${Ncloumn}
							${Ocloumn}
							${Pcloumn}
							${Qcloumn}
						</td>
						<td class="person"></td>
					`
				tr.addEventListener('mouseenter', function () {
					this.style.backgroundColor = list[i].color
				})
				tr.addEventListener('mouseleave', function () {
					this.style.backgroundColor = '#FFFFFF'
				})
			
				tr.addEventListener('click', function () {
					var info = this.nextSibling
					if (info.classList.contains('hide')) {
						info.classList.remove('hide')
					} else {
						info.classList.add('hide')
					}
					info.style.background = list[i].color
				})
				table.appendChild(tr)
				table.appendChild(intrTr)
			}
		}
		

		topBtn.addEventListener('click', function () {
			window.scrollTo(0, 0);
		})

		about.addEventListener('click', function () {
			mask.classList.remove('hide')
		})
		close.addEventListener('click', function () {
			this.parentNode.parentNode.classList.add('hide')
		})

		
		console.log(searchBtn)
		searchBtn.addEventListener('click',function(){
			list = newList
			
			let val = keywords.value.trim()
			val = val.toLowerCase()
			if (val == ''){
				list = newList
			}
			
			const newArr =  JSON.parse(JSON.stringify(list))
			list = newArr.filter(function(item){
				if (item.name.toLowerCase().indexOf(val) != -1) {
					return item
				}
				if (item.person.toLowerCase().indexOf(val) != -1) {
					return item
				}
				if (item.type.toLowerCase().indexOf(val) != -1) {
					return item
				}
			})

			getRender()
		})
	</script>
</body>

</html>